<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sous titres jeu</title>
    <script src="/js/vendor/socket.io.js"></script>
    <script type="module" src="./js/index.js"></script>
    <script>
      const run = async () => {
        const { main } = await import("./js/index.js");

        main("__WEBSOCKET_URL__");
      };

      run();
    </script>
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <!-- ================= VIDEO ================= -->
    <div id="videoContainer">
      <div id="viewInfo">âœ</div>
      <video id="gameVideo" controls playsinline></video>
      <video id="libraryVideo" controls style="display: none">
        <track id="libraryVideoTrack" kind="subtitles" default />
      </video>
      <div id="subtitleOverlayLocal" class="subtitleOverlay"></div>
      <div
        id="subtitleOverlayRemote"
        class="subtitleOverlay"
        style="display: none"
      ></div>
    </div>

    <!-- ================= PLAYER VIEW ================= -->
    <div id="playerView" class="viewContainer">
      <div id="subtitlesList"></div>
    </div>

    <!-- ================= REMOTE VIEW ================= -->
    <div
      id="remoteView"
      class="viewContainer"
      style="display: none; gap: 16px; max-width: 100vw"
    >
      <div style="display: flex; width: 100%; height: 80%">
        <!-- Colonne gauche -->
        <div
          style="
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-width: 70%;
          "
        >
          <div style="display: flex; justify-content: space-between">
            <button id="previousTimeButton">âª</button>
            <button id="videoStateButton">ğŸ”„</button>
            <button id="nextTimeButton">â©</button>
            <button id="stopButton">â¹ï¸</button>
            <input
              id="saveNameInput"
              placeholder="Nom ğŸ¤–ğŸ“„"
              style="max-width: 25%"
            />
            <button id="saveButton" disabled style="display: none">ğŸ’¾</button>
          </div>
          <div id=""></div>
          <div
            id="playersList"
            style="display: block; width: 100%; overflow-y: auto"
          ></div>
        </div>

        <!-- Colonne droite -->
        <div
          style="
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-width: 0;
          "
        >
          <div>
            <span id="clipLabel" style="cursor: inherit">ğŸ“ğŸ“—</span>
            <select id="clipSelect"></select>
          </div>
          <div
            id="savesList"
            style="display: block; width: 100%; overflow-y: auto"
          ></div>
        </div>

        <!-- RemoteView Timeline Container -->
      </div>

      <div
        id="timelineContainer"
        style="
          display: flex;
          overflow-x: auto;
          gap: 4px;
          padding: 4px;
          border: 1px solid #454545;
          height: 20%;
          background-color: #d9d9d9;
        "
      ></div>
    </div>

    <!-- ================= LIBRARY VIEW ================= -->
    <div id="libraryView" class="viewContainer" style="display: none">
      <div class="libraryLayout" style="padding: 5px">
        <span id="libraryLabel" style="cursor: inherit">ğŸ“ğŸ“šğŸï¸ğŸ“„</span>
        <select
          id="librarySelect"
          style="font-size: 30px; max-width: 100%"
        ></select>

        <div class="libraryEditor">
          <div>
            <label for="startClipInput">â²ï¸</label>
            <input
              id="startClipInput"
              type="text"
              required
              placeholder="00:00:00"
              pattern="^([0-1]\d|2[0-3]):([0-5]\d):([0-5]\d)$"
              title="Format attendu : hh:mm:ss"
            />
          </div>

          <div>
            <label for="endClipInput">â²ï¸</label>
            <input
              id="endClipInput"
              type="text"
              required
              placeholder="00:00:00"
              pattern="^([0-1]\d|2[0-3]):([0-5]\d):([0-5]\d)$"
              title="Format attendu : hh:mm:ss"
            />
          </div>

          <input
            id="clipName"
            required
            placeholder="Nom ğŸ“ğŸ“—"
            pattern=".*\S.*"
            title="Le nom du clip ne peut pas Ãªtre vide"
          />
          <button id="createClip">ğŸ’¾â†’âš™ï¸ğŸ¤</button>
        </div>

        <div
          id="libraryClipSelectContainer"
          style="display: none; align-items: center; gap: 4px"
        >
          <span id="libraryClipLabel" style="cursor: inherit">ğŸ“ğŸ“—</span>
          <select id="libraryClipSelect"></select>
          <button id="deleteClipButton" style="display: none">âŒ</button>
        </div>
      </div>
    </div>

    <!-- ================= FOOTER ================= -->
    <div id="subtitleForm">
      <div class="row">
        <div id="viewActionMenu" class="action-menu">
          <button class="action-menu-toggle">âš™ï¸</button>

          <div class="action-menu-panel">
            <button class="action-menu-item" data-action="libraryView">
              ğŸ“š
            </button>
            <button class="action-menu-item" data-action="remoteView">
              ğŸ¤
            </button>
            <button class="action-menu-item" data-action="playerView">
              âœ
            </button>
          </div>
        </div>

        <span style="background: #489dce" id="playerName"></span>

        <button id="submitButton">ğŸ“„</button>

        <div id="emoticonActionMenu" style="display: none" class="action-menu">
          <button class="action-menu-toggle">ğŸ’¬</button>

          <div class="action-menu-panel">
            <!-- Colonne 1 : Confusion / neutre / gÃªnÃ© -->
            <button class="action-menu-item" data-action="emoticon">ğŸ˜•</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¬</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ¤¨</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¶</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ™„</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜®â€ğŸ’¨</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜³</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜</button>

            <!-- Colonne 2 : Positif / joyeux -->
            <button class="action-menu-item" data-action="emoticon">ğŸ™‚</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜ƒ</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜‚</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜„</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜Š</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ¥³</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜º</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¸</button>

            <!-- Colonne 3 : NÃ©gatif / critique / dÃ©sapprobation -->
            <button class="action-menu-item" data-action="emoticon">â—</button>
            <button class="action-menu-item" data-action="emoticon">âŒ</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ‘</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¡</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜ </button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜°</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¢</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜Ÿ</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¥</button>

            <!-- Colonne 4 : Surprise / choc / Ã©tonnement -->
            <button class="action-menu-item" data-action="emoticon">ğŸ˜®</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜²</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜±</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ¤¯</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜§</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¨</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¦</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜µ</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¶â€ğŸŒ«ï¸</button>

            <!-- Colonne 5 : Amour / affection / positif -->
            <button class="action-menu-item" data-action="emoticon">ğŸ˜</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ¥°</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜˜</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜»</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ’–</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ’˜</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ’</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ’</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ’—</button>

            <!-- Colonne 6 : Blague / drÃ´le / espiÃ¨gle -->
            <button class="action-menu-item" data-action="emoticon">ğŸ˜œ</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ¤ª</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜›</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ¤­</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¼</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜¹</button>
            <button class="action-menu-item" data-action="emoticon">ğŸ˜»</button>
          </div>
        </div>

        <button id="renderButton" disabled style="display: none">ğŸ“½ï¸ğŸ•”</button>
        <button id="goToRender" disabled style="display: none">ğŸï¸</button>
      </div>
    </div>
  </body>
</html>
